---
title: "가설검정"
---

## 통계적 추론 개요 {#statistical-inference}

![슬라이드 26](../images/ch05/slide_26.png){width=100%}

Project Y에 영향을 줄 것이라고 예상한 인자(x's)들이 실제로 Y값에 영향을 주는지를 알아보기 위해 먼저 가설을 설정하고, 수집한 Data를 이용하여 통계적으로 가설의 성립 여부를 의사결정합니다.

| 데이터 유형 | 비교(Comparison) | 도구 |
|-------------|-----------------|------|
| **연속형** | 평균 | t-Test / ANOVA |
| | 분산 | 2-Variance / Equal Variance |
| | 관계 | Correlation / Regression |
| **이산형** | 독립성 | Chi-square Test |
| | 비율 | Proportion |

### 통계적 추론의 체계

![슬라이드 27](../images/ch05/slide_27.png){width=100%}

통계적 추론이란 데이터 또는 데이터로부터 생성된 정보를 바탕으로 의미 있는 결론을 도출하는 과정의 총칭입니다.

| 추론 방법 | 설명 |
|-----------|------|
| **점 추정(Point Estimation)** | 추출된 표본으로부터 모수의 값에 가까우리라고 예상되는 하나의 값을 제시 |
| **구간 추정(Interval Estimation)** | 특정 신뢰도하에서 실제 모수를 포함하리라고 예상되는 적절한 구간을 제시 |
| **가설 검정(Hypothesis Test)** | 확인하고자 하는 사실을 가설로 설정하고, 채택/기각 여부를 확인하여 의사 결정 |

### 중요 표본 분포

![슬라이드 28](../images/ch05/slide_28.png){width=100%}

::: {.callout-note title="주요 분포와 관심 모수" collapse="true"}
**연속형 표본 분포**: t-분포, Z-분포, Chi-square 분포, F-분포

**중요 관심 모수**: 평균, 평균의 차이, 비율, 비율의 차이, 분산, 분산의 비

**이산형 표본 분포**: 이항분포(복원 추출), 초기하분포(비복원 추출), 포아송분포(일정 단위당 발생 빈도수)
:::

### 중심극한정리와 표본평균의 분포

![슬라이드 29](../images/ch05/slide_29.png){width=100%}

모집단이 대칭형의 분포이면 n=5 정도만 되어도 평균은 정규분포에 근사하고, 완전비대칭인 경우에는 n=50 정도가 되면 정규분포에 근사합니다. 일반적으로 **30개 이상이면 충분히 크다**고 말합니다.

::: {.callout-tip title="오차, 편차, 잔차의 구별" collapse="true"}
- **오차**: 참값과 측정값과의 차이
- **편차**: 평균과 측정값과의 차이
- **잔차**: 가정된 값과 측정값과의 차이
:::

### 점추정과 구간추정

![슬라이드 30](../images/ch05/slide_30.png){width=100%}

- **점추정**: 관심 모수에 적절한 통계량을 선정하고, 계산된 통계량 값을 근거로 모수에 대한 의사결정
- **구간추정**: 표본 분포에 근거하여, 주어진 신뢰도하에서 관심 모수를 포함할 신뢰구간을 구하여 모수에 대한 의사결정

![슬라이드 31](../images/ch05/slide_31.png){width=100%}

샘플의 평균을 이용하여 모평균(μ)이 존재할 구간을 추정하는 경우, **표본 크기에 따라 신뢰구간도 달라집니다.**

### 신뢰구간의 이해

![슬라이드 32](../images/ch05/slide_32.png){width=100%}

유의수준이나 표본크기의 변화에 따라 신뢰구간도 변합니다:

- **신뢰도가 증가**하면 → 신뢰구간이 **넓어짐**
- **표본크기(n)가 커지면** → 신뢰구간이 **좁아짐**

---

## 가설검정 기초 {#hypothesis-basics}

### 가설검정의 개념

![슬라이드 33](../images/ch05/slide_33.png){width=100%}

모집단의 품질 특성을 전수 조사/검사하는 것은 경제성 관점에서 쉽지 않으므로, 모집단으로부터 일부의 표본을 취하여 품질 특성을 조사한 결과로 모집단의 품질 특성을 추정합니다.

::: {.callout-important}
통계적인 결정(귀무가설 채택/기각)을 하는 데 있어서 **표본 수량이 부족**하거나, 표본의 성격이 **부적절(대표성 부족)** 하거나, **적절하지 못한 검정 방법**을 사용하였다면 그 결정이 잘못될 수 있습니다.
:::

### 가설검정 실시 절차

![슬라이드 34](../images/ch05/slide_34.png){width=100%}

### 귀무가설과 대립가설, 오류의 종류

![슬라이드 35](../images/ch05/slide_35.png){width=100%}

| 용어 | 설명 |
|------|------|
| **H₀ (귀무가설)** | 검정의 대상으로 삼는 가설. "~는 ~이다", "~와 ~는 같다", "~는 ~에 영향을 주지 않는다" 등 |
| **H₁ (대립가설)** | 귀무가설을 부정하는 가설 |
| **α (유의수준)** | H₀이 참인데 기각하는 확률 (전형적으로 5% 설정) |
| **β (제2종 오류)** | H₁이 맞는데 H₀를 채택할 확률 (전형적으로 10%) |
| **1-α (신뢰도)** | H₀이 옳은 경우에 옳다고 판단하는 확률 |
| **1-β (검정력)** | H₁이 맞을 때 H₁을 채택할 확률 |

::: {.callout-tip title="오류의 종류" collapse="true"}
| | H₀이 참 | H₀이 거짓 |
|-|---------|----------|
| **H₀ 채택** | 올바른 결정 (1-α) | 2종 오류 (β) |
| **H₀ 기각** | 1종 오류 (α) | 올바른 결정 (1-β) |

**유의수준 5%의 의미**: 전수조사가 어려워 샘플의 통계량으로 모수에 대한 의사결정을 하는 경우, 100번 의사결정을 하면 그중 5번 정도는 오류를 범할 수 있다는 의미입니다.

**참고**: "="은 항상 H₀에 포함되며, 가설 검정의 관심은 대립가설에 있지만 출발점은 귀무가설 설정을 올바르게 하는 것입니다.
:::

### p-value와 의사결정

![슬라이드 36](../images/ch05/slide_36.png){width=100%}

**의사결정 3가지 방법**:

1. **p-value 방법**: P-Value < α 이면 귀무가설을 기각, P-Value >= α 이면 귀무가설 기각 실패(채택)
2. **신뢰구간 방법**: 검정하고자 하는 값이 신뢰구간 내에 존재하면 귀무가설 기각 실패
3. **검정 통계량 방법**: 검정 통계량 값이 임계치(기각치)보다 크면(기각역에 위치하면) 귀무가설을 기각

::: {.callout-note title="P-Value란?" collapse="true"}
**P-Value (Significant Probability, 유의 확률)**

- H₀하에서 H₀를 기각할 (최소의) 확률
- 수집한 Data를 가지고 계산된 검정통계량으로부터 확률밀도함수의 면적을 구한 값
- H₀를 기각, 즉 대립가설이 채택될 때 **"통계적으로 유의하다(Statistically Significant)"** 라고 말함
:::

### 의사결정 사례

![슬라이드 37](../images/ch05/slide_37.png){width=100%}

Two-Sample T-Test 결과 해석 예시: p-value = 0.107로 유의수준 5%하에서 귀무가설을 기각하지 못합니다. 95% 신뢰구간 내에 검정하려는 값이 포함되므로 귀무가설 채택입니다.

### 검정통계량의 결정

![슬라이드 38](../images/ch05/slide_38.png){width=100%}

가설검정을 수행할 목적과 수집되는 데이터의 속성, 실무적 상황에 따라 적절한 분석 방법을 선택하는 것이 중요합니다.

---

## 1-Sample t Test {#one-sample-t}

![슬라이드 39](../images/ch05/slide_39.png){width=100%}

**목적**: 샘플의 평균과 기준값을 비교 (모집단의 표준편차를 알지 못하고 샘플 크기가 크지 않을 때 사용)

| 검정 방향 | 귀무가설 | 대립가설 |
|-----------|----------|----------|
| Not Equal | H₀: μ = μ₀ | H₁: μ ≠ μ₀ |
| Less Than | H₀: μ = μ₀ | H₁: μ < μ₀ |
| Greater Than | H₀: μ = μ₀ | H₁: μ > μ₀ |

$$t = \frac{\bar{X} - \mu_0}{s / \sqrt{n}}$$

**의사결정**: p-value < α 이면 H₀를 기각
**구간추정**: 기준값이 구해진 신뢰구간 내에 포함되면 귀무가설을 채택

### 예제: 1-Sample t Test

![슬라이드 40](../images/ch05/slide_40.png){width=100%}

전자제품에 들어가는 부품의 강도(Strength) 목표값은 7.35이며, 허용한계는 +/- 0.80입니다. 'Strength'의 평균 길이가 목표값(7.35)과 일치하는지를 확인합니다.

![슬라이드 41](../images/ch05/slide_41.png){width=100%}

Minitab에서 Stat > Basic Statistics > 1-sample t 메뉴를 사용합니다. 평균이 7.35와 같다고 할 수 있냐? 없냐?의 질문이므로 대립가설은 **Not equal**로 선택합니다.

![슬라이드 42](../images/ch05/slide_42.png){width=100%}

**결과 해석**: T-Value = -4.86, P-Value = 0.000으로, 유의수준 5%하에서 T.Length의 평균은 목표값 7.35와 **다르다고 할 수 있습니다.** 95% 신뢰구간 (7.1552, 7.2689)에 검정값 7.35가 포함되지 않으므로 귀무가설을 기각합니다.

---

## 2-Sample t Test {#two-sample-t}

![슬라이드 43](../images/ch05/slide_43.png){width=100%}

**목적**: 상호 독립적인 두 집단의 평균의 차이 여부를 비교

| 검정 방향 | 귀무가설 | 대립가설 |
|-----------|----------|----------|
| Not Equal | H₀: μ₁ - μ₂ = Δ | H₁: μ₁ - μ₂ ≠ Δ |
| Less Than | H₀: μ₁ - μ₂ = Δ | H₁: μ₁ - μ₂ < Δ |
| Greater Than | H₀: μ₁ - μ₂ = Δ | H₁: μ₁ - μ₂ > Δ |

$$t = \frac{\bar{X}_1 - \bar{X}_2}{\sqrt{s_p^2(1/n_1 + 1/n_2)}}$$

**절차**: 정규성 검정 → 등분산 검정 → 평균치 검정

::: {.callout-warning}
2-Sample t Test 결과 유의하지 않다는 결론이 2개 집단의 평균이 같다는 의미는 아닙니다. 2개 집단의 평균이 동일한지는 별도의 기준 및 Tool을 적용하여 확인하여야 합니다.
:::

### 등분산 검정 (Test for Equal Variances)

![슬라이드 44](../images/ch05/slide_44.png){width=100%}

**목적**: 두 집단 이상에서 각 집단의 분산이 동일한가를 비교

- **H₀**: σ₁² = σ₂² = ... = σₖ²
- **H₁**: 적어도 하나 이상의 분산이 다른 집단이 있다

::: {.callout-tip title="등분산 가정의 의미" collapse="true"}
2-Sample t Test에서 두 그룹의 분산이 같다고 가정하면 더 강력한 검정(Pooled t Test)이 가능합니다.

- **등분산 O**: Pooled t Test 사용 (자유도 높음, 검정력 강함)
- **등분산 X**: Welch's t Test 사용 (더 보수적)

Minitab에서 p(등분산) > 0.05이면 Pooled 방법을 선택하세요.
:::

### 가설검정 부연 설명

![슬라이드 45](../images/ch05/slide_45.png){width=100%}

::: {.callout-important title="같은 차이라도 샘플수에 따라 P-value가 달라짐"}
A의 평균 5.08, B의 평균 6.72로 1.7만큼 차이가 있지만:

- **n=5**: p-value = 0.142 → H₀ 채택 ("평균이 다르다고 할 수 없다")
- **n=10**: p-value = 0.025 → H₀ 기각 ("평균이 다르다고 할 수 있다")

귀무가설 "같다"는 엄밀하게 **"다르다고 말할 수 없다"** 라고 하는 것이 올바른 표현입니다.

- p-value = 0.99로 H₀ 채택과 p=0.06으로 H₀ 채택은 동일한 결론일 수 있으나, 실제 업무에서는 시료수 확대 및 기술적 검토를 해보는 것이 바람직합니다.
:::

### 예제: 2-Sample t Test

![슬라이드 46](../images/ch05/slide_46.png){width=100%}

'Strength'의 평균이 Supplier 'A'와 'B'에서 서로 동일한가를 확인합니다. 먼저 정규성 검정에서 두 집단 모두 정규성에 위배되지 않음을 확인합니다.

![슬라이드 47](../images/ch05/slide_47.png){width=100%}

등분산 검정 결과: P-value = 0.688로, 유의수준 5%하에서 두 집단의 분산은 서로 다르다고 할 수 없습니다.

![슬라이드 48](../images/ch05/slide_48.png){width=100%}

Minitab에서 Stat > Basic Statistics > 2-Sample t 메뉴를 사용합니다. 등분산 검정의 결과에 따라 Pooled 여부를 반영합니다.

![슬라이드 49](../images/ch05/slide_49.png){width=100%}

**결과 해석**:

1. P=0.735로 유의수준 5%하에서 **평균이 다르다고 할 수 없다**
2. 95% 신뢰구간 (-0.1341, 0.0952) 안에 "0"이 포함되므로 평균이 다르다고 할 수 없다
3. t-Value = 0.34로 기각치 2.00보다 작으므로 평균이 다르다고 할 수 없다

### 2-Sample t Test의 구간 추정

![슬라이드 50](../images/ch05/slide_50.png){width=100%}

::: {.callout-tip title="신뢰구간을 활용한 검정 결과 해석" collapse="true"}
- 95% 신뢰구간이 0을 **포함하지 않으면** → 두 군의 모평균의 차이가 0일 가능성은 5% 미만 (유의한 차이)
- 95% 신뢰구간이 0을 **포함하면** → 통계적으로 유의한 차이가 없음
- 평균은 비슷해 보이지만 **신뢰구간 폭의 차이**로 인해 유의성 여부가 달라질 수 있음
- 표본크기(n)가 작아서 유의하지 않을 가능성이 있음
:::

---

## Paired t Test {#paired-t}

![슬라이드 51](../images/ch05/slide_51.png){width=100%}

**Paired Data(쌍체 데이터)**: 동일한 개체/대상으로부터 반복되거나 동시에 측정되는 데이터

- 예) 각 직원들의 교육 전과 교육 후의 업무 수행 능력
- 예) 동일 부품의 서로 다른 시점에서의 측정 값

**목적**: 동일 개체/대상으로부터 관찰된 쌍체 데이터의 평균 차이 여부를 비교

$$t = \frac{\bar{d}}{s_d / \sqrt{n}}$$

::: {.callout-note title="2-Sample t와 Paired t의 차이" collapse="true"}
1. **2-Sample t 검정**: 각 집단의 평균을 먼저 구한 다음 두 개 평균의 차이 여부를 비교
2. **Paired t 검정**: 쌍을 이룬 2집단 간 개별값의 차이를 먼저 계산한 다음, 차이 값들의 평균을 구하여 1-Sample t 검정을 수행

핵심: 동일 대상으로부터 측정된 처리 전/후의 특성은 상호 독립이라고 할 수 없으므로, 반드시 Paired t Test를 사용해야 합니다.
:::

### 예제: Paired t Test

![슬라이드 52](../images/ch05/slide_52.png){width=100%}

고객 핵심 요구사항 중 동일 제품에서 T.Length와 D.Length는 차이가 없어야 합니다 (허용 한계: +/-0.50). T.Length는 일정한 처리 후의 측정값이며, D.Length는 처리 전 동일 대상으로부터 측정해 놓은 값입니다.

![슬라이드 53](../images/ch05/slide_53.png){width=100%}

T.Length와 D.Length는 선형에 근사한 관계를 갖는 Paired Data입니다. 반면 Supplier A와 B의 T.Lengths는 동일 대상으로부터 측정되었지만 상호 독립에 가깝습니다.

![슬라이드 54](../images/ch05/slide_54.png){width=100%}

Minitab에서 Stat > Basic Statistics > paired t 메뉴를 사용합니다.

![슬라이드 55](../images/ch05/slide_55.png){width=100%}

**결과 해석**: 유의수준 5%하에서 그 차이가 실제적인 차이라고 판단하기 어렵습니다. 다만, 차이가 매우 크거나 매우 작은 이상점들을 조사해볼 필요가 있으며, 대부분 "Chamber2"와 관련됩니다.

::: {.callout-tip title="이상점의 의미"}
올바르게 수집된 데이터로부터의 이상점은 다양한 **프로세스 정보를 제공**합니다.
:::

### 이상점 제거 후 재분석

![슬라이드 56](../images/ch05/slide_56.png){width=100%}

Data Resume를 참조한 결과, 이상점들은 대부분 프로세스 Adjustment 직후 나타났습니다. 이를 프로세스 관리 기준에 첨부하여 추가 조사하기로 하였으나, 특수한 상황이므로 이상점을 제거하고 재분석하였습니다.

::: {.callout-warning}
이상점이라고 해서 **실무적인 근거 없이 함부로 제거해서는 안 됩니다.**
:::

### Paired t와 2-Sample t의 비교

![슬라이드 57](../images/ch05/slide_57.png){width=100%}

이상점 제거 후 동일 데이터에 대해:

- **Paired t Test**: p-value = 0.000 (유의한 차이 있음)
- **2-Sample t Test**: p-value = 0.628 (유의한 차이 없음)

::: {.callout-important}
**데이터 수집 환경을 올바르게 반영하는 적절한 분석 방법을 사용해야 합니다.**
:::

---

## 1-Proportion Test {#one-proportion}

![슬라이드 70](../images/ch05/slide_70.png){width=100%}

**목적**: 집단의 비율과 기준값을 비교

| 검정 방향 | 귀무가설 | 대립가설 |
|-----------|----------|----------|
| Not Equal | H₀: p = p₀ | H₁: p ≠ p₀ |
| Less Than | H₀: p = p₀ | H₁: p < p₀ |
| Greater Than | H₀: p = p₀ | H₁: p > p₀ |

::: {.callout-note title="비율 검정에서 샘플 수의 영향" collapse="true"}
불량률이 15%보다 높다고 할 수 있는가?를 검정할 때:

- **10개 중 2개 불량** (비율 20%): p-value = 0.456 → "15%보다 높다고 말할 수 없다"
- **1,000개 중 200개 불량** (비율 20%): p-value = 0.000 → "15%보다 높다고 말할 수 있다"

같은 비율(20%)이라도 샘플 수에 따라 결론이 달라집니다!
:::

### 예제: 1-Proportion Test

![슬라이드 71](../images/ch05/slide_71.png){width=100%}

대용량 데이터 전송시험에서 전송 Delay time이 허용한계(5ms) 이하인 시험회수와 비율(합격률)을 확인합니다. 합격 횟수 = 58개 중 52개, 합격 비율 = 89.66%

![슬라이드 72](../images/ch05/slide_72.png){width=100%}

현재 조사된 합격률 89.66%가 기존 데이터 전송효율 최소 기준인 75%와 동일한지 확인한 결과, 유의수준 5%하에서 **동일하다고 할 수 없습니다.**

---

## 2-Proportion Test {#two-proportion}

![슬라이드 73](../images/ch05/slide_73.png){width=100%}

**목적**: 상호 독립적인 두 집단의 비율의 차이 여부를 비교

| 검정 방향 | 귀무가설 | 대립가설 |
|-----------|----------|----------|
| Not Equal | H₀: p₁ - p₂ = Δ | H₁: p₁ - p₂ ≠ Δ |
| Less Than | H₀: p₁ - p₂ = Δ | H₁: p₁ - p₂ < Δ |
| Greater Than | H₀: p₁ - p₂ = Δ | H₁: p₁ - p₂ > Δ |

### 예제: 2-Proportion Test

![슬라이드 74](../images/ch05/slide_74.png){width=100%}

데이터 전송 방식에 따른 합격률이 동일한지 확인합니다. 먼저 Minitab에서 Data > Recode > To text로 연속형 데이터를 Pass/Fail로 변환합니다.

![슬라이드 75](../images/ch05/slide_75.png){width=100%}

Cross Tabulation으로 각 전송방식별 합격/불합격 수를 파악합니다:

- A의 합격 수: 29개 중 24개
- B의 합격 수: 29개 중 28개

![슬라이드 76](../images/ch05/slide_76.png){width=100%}

**결과 해석**: 유의수준 5%하에서 Supplier A와 B의 합격률은 서로 **다르다고 할 수 없습니다.**

::: {.callout-note title="Fisher's Exact Test" collapse="true"}
2x2 Table에서 기대 도수가 5 미만인 경우 Fisher's Exact Test를 적용합니다.
:::

---

## Chi-Square Test (카이제곱 검정) {#chi-square}

![슬라이드 77](../images/ch05/slide_77.png){width=100%}

**목적**: 범주형 변수의 독립성/동질성을 검정

- **H₀**: 모든 행(i)과 열(j)의 범주에서 pij = pi*pj (서로의 관계는 독립적)
- **H₁**: H₀가 사실이 아니다 (서로의 관계는 종속적)

$$\chi^2 = \sum \frac{(O - E)^2}{E}$$

::: {.callout-warning title="주의사항"}
- 범주형 자료의 **빈도**를 사용
- 빈도가 계산된 관측 값들은 모두 **상호 독립**을 가정
- 교차표의 각 셀의 기대 빈도는 **5 이상**이 바람직 (그렇지 않은 경우 범주 간 통합 후 재분석 고려)
:::

### 예제: Chi-Square Test

![슬라이드 78](../images/ch05/slide_78.png){width=100%}

OO제품의 주요 기능이 OS플랫폼에 따라 안정성의 차이가 있다는 지적에 따라, 기능별로 오동작 횟수를 검토합니다.

![슬라이드 79](../images/ch05/slide_79.png){width=100%}

**결과 해석**: P = 0.001 (< 0.05)로, 주요 기능은 OS플랫폼과 **독립이라고 할 수 없습니다** (즉, OS플랫폼에 따라 기능별 오동작이 영향을 받음).

::: {.callout-tip title="기대값 계산" collapse="true"}
기대값 = (열의 합 x 행의 합) / Total

카이스퀘어 통계량 기여도 = (관측값 - 기대값)² / 기대값

만일 기대값이 5보다 작은 셀이 존재한다면, 검정 결과가 정확하지 않을 수 있으므로, 가능하다면 의미가 비슷한 범주로 통합하여 재분석합니다.
:::

### 카이제곱 검정의 유형

![슬라이드 80](../images/ch05/slide_80.png){width=100%}

| 검정 유형 | 모집단 | 목적 |
|-----------|--------|------|
| **적합도 검정 (Goodness of Fit)** | 1개 집단 | 한 범주형 변수의 각 그룹별 비율과 특정 상수비가 같은지 검정 |
| **독립성 검정 (Test of Independence)** | 1개 모집단 | 두 변수의 독립성(관련이 있는지)을 검정 |
| **동질성 검정 (Test of Homogeneity)** | 2개 이상 | 여러 개의 집단에 대한 어떤 변수의 분포가 같은지 검정 |

::: {.callout-note title="독립성 검정 vs 동질성 검정" collapse="true"}
**독립성 검정**: 1개의 모집단으로부터 샘플링하여 여러 개의 속성으로 구분

- 예) 직장인 200명에서 "성별과 흡연여부가 관련이 있는지?"
- H₀: 변수 A, B는 독립적이다 (관련이 없다)

**동질성 검정**: 여러 개의 모집단으로부터 각각 샘플링

- 예) 남자 직장인 100명, 여자 직장인 100명에서 "흡연율 차이가 있는지?"
- H₀: 변수 A(남자, 여자)의 분포가 동일하다

가설은 다르지만 **분석방법은 동일**합니다.
:::

---

## 실습: 가설검정 도구

<div class="streamlit-embed">
<iframe
  src="https://sixsigma-apps.streamlit.app/Hypothesis_Test?embed=true"
  height="800"
  style="width:100%;border:none;">
</iframe>
</div>
